<html xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <script src="/resources/jquery-3.3.1.js"></script>
    <link rel="stylesheet" href="/resources/bootstrap-4.0.0-dist/css/bootstrap.min.css"/>
    <script src="/resources/popper.min.js"></script>
    <script src="/resources/vue.js"></script>
    <link href="/resources/open-iconic/font/css/open-iconic-bootstrap.css" rel="stylesheet">
    <script src="/resources/bootstrap-4.0.0-dist/js/bootstrap.min.js"></script>
    <script src="/resources/underscore.js"></script>

    <link href="/global.css" rel="stylesheet">
</head>
<body>
<div class="popupBody" id="scrapeApp">
    <header>
        <a href="/index.html" v-on:click="updatePageState('/index.html')">
            <span class="oi oi-home"></span>
        </a>
        <h3>
            <span>Collect Data</span>
        </h3>
    </header>
    <div class="dropdown">
        <button class="btn dropdown-toggle" type="button" id="labrador-scrape-dropdown-rule"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            {{selectedRuleSetOption && selectedRuleSetOption.name || 'Rule Set'}}
        </button>

        <div class="dropdown-menu" aria-labelledby="scrape-dropdown-rule">
            <a v-for="option in ruleSetOptions" class="dropdown-item"
               href="#!" v-on:click="selectRuleSetOption(option);">{{option.name}}</a>
        </div>
    </div>
    <div v-if="constraintViolation" class="margin-med alert alert-danger" role="alert">
        The scraped data violates a unique constraint and has not been saved!
    </div>
    <ul id="scrape-list">
        <li v-for="result in scrapeResults"><b>{{result.key}}</b> - {{result.value}}</li>
    </ul>
    <br/>
    <br/>
    <footer>
        <button class="btn margin-xs" v-on:click="scrape()" :disabled="!selectedRuleSetOption">Scrape
        </button>
    </footer>
</div>
<script src="scrapeController.js"></script>
</body>
</html>